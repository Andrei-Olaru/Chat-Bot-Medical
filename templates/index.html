<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Medical</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Chatbot Medical</h1>
        <div id="chat-container">
            <!-- Adaugă mesajul de introducere aici -->
            <div class="bot-message">
                <p>Bună, sunt MedBot și sunt aici să-ți răspund la orice întrebări medicale ai avea. Te rog să ții cont că dețin doar niște cunoștințe generale și te pot ajuta cu unele sfaturi, însă mereu este indicat să consulți și un medic specializat dacă ai orice fel de problemă medicală.</p>
            </div>
            {% for message in chat_messages %}
                {% if message['sender'] == 'user' %}
                    <div class="user-message">
                        <p><strong>{{ current_user.username }}:</strong> {{ message['content'] }}</p>
                    </div>
                {% else %}
                    <div class="chatbot-message">
                        <p><strong>MedBot:</strong> {{ message['content'] }}</p>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        <input type="text" id="user-input" placeholder="Introdu întrebarea ta...">
        {% if is_authenticated %}
            <button onclick="sendMessage()">Trimite</button>
        {% else %}
            <div class="container_avertizare">
                Trebuie să fii autentificat pentru a trimite un mesaj!
            </div>
        {% endif %}

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <script>
                        alert("{{ category }}: {{ message }}");
                    </script>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>

    {% if is_authenticated %}
    <div class="greeting-container styled-container">
        Salut {{ current_user.username }}
    </div>
    <a href="{{ url_for('logout') }}" class="logout-button">Logout</a>
    {% else %}
        <a href="{{ url_for('login') }}" class="login-button">Login</a>
        <a href="{{ url_for('register') }}" class="register-button">Register</a>
    {% endif %}

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>